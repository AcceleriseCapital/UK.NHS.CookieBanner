name: Cookie Banner Continuous Integration
on:
  push:
    branches:
      - master
jobs:
  build:
      env:
        BUILD_CONFIG: 'Release'
        DOTNET_ROLL_FORWARD: 'Major'
        SOLUTION: 'UK.NHS.CookieBanner.sln'
      name: Build and publish package
      runs-on: ubuntu-latest
      strategy: 
          matrix:
           dotnet-version: ['6.0.x']
      steps:
        - uses: actions/checkout@v2
          with:
           fetch-depth: 0

        - name: Setup .NET Core SDK 60
          uses: actions/setup-dotnet@v1
          with:
            dotnet-version: ${{ matrix.dotnet-version }}

        - name: Install GitVersion
          uses: gittools/actions/gitversion/setup@v0.9.7
          with:
            versionSpec: '5.5.0'
            
        - name: Determine Version
          id:   gitversion
          uses: gittools/actions/gitversion/execute@v0.9.7

        - name: Display GitVersion outputs
          run: |
            echo "Major: ${{ steps.gitversion.outputs.major }}"
            echo "Minor: ${{ steps.gitversion.outputs.minor }}"
            echo "Patch: ${{ steps.gitversion.outputs.patch }}"
            echo "NuGetVersionV2: ${{ steps.gitversion.outputs.nuGetVersionV2 }}"
            
     
